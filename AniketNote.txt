1️⃣ Install Java 17 (Amazon Linux)

sudo amazon-linux-extras enable java-openjdk17
sudo amazon-linux-extras install java-openjdk17 -y
java -version


2️⃣ Jenkins Installation (no changes)

sudo wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo
sudo rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io.key
sudo yum install -y jenkins
sudo systemctl enable jenkins
sudo systemctl start jenkins
sudo systemctl status jenkins

3️⃣ Nginx, Git, curl

sudo amazon-linux-extras enable nginx1
sudo yum install -y nginx git curl
sudo systemctl enable nginx
sudo systemctl start nginx

4️⃣ Jenkins sudo privileges

sudo visudo

Add:
jenkins ALL=(ALL) NOPASSWD: ALL


5️⃣ CI Pipeline Setup (Jenkins)

Steps for CI (Compile / Build / Test):
Create a new Jenkins job → Name it Train-Ticket-CI → Type: Pipeline
Pipeline configuration → Pipeline script from SCM
SCM: Git
Repository URL: https://github.com/Wakekar/Train-Ticket-Reservation-System.git
Branch: main
Script Path: Jenkinsfile (your CI Jenkinsfile)


5️⃣ CD Deployment Permissions

sudo chown -R nginx:nginx /usr/share/nginx/html
sudo chmod -R 755 /usr/share/nginx/html
sudo systemctl restart nginx

6️⃣ CD Jenkinsfile (Amazon Linux, Java 17 compatible)

7️⃣ CD Pipeline Setup (Jenkins)

Steps:

Create a new Jenkins job → Name it Train-Ticket-CD → Type: Pipeline
Pipeline configuration → Pipeline script from SCM
SCM: Git
Repository URL: https://github.com/Wakekar/Train-Ticket-Reservation-System.git
Branch: main
Script Path: Jenkinsfile-cd

8️⃣ Optional: Trigger CD from CI

At the end of your CI Jenkinsfile:

stage('Trigger CD') {
    steps {
        build job: 'Train-Ticket-CD', wait: true
    }
}

